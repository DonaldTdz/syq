<form nz-form [formGroup]="form" *ngIf="modalVisible" id="frm_create_role" (ngSubmit)="save()">
    <nz-modal [nzVisible]="modalVisible" [nzTitle]="'创建角色'" [nzConfirmLoading]="loading" [nzContent]="modalContent"
        [nzFooter]="modalFooter" (nzOnCancel)="handleCancel($event)">
        <ng-template #modalContent>
            <div nz-form-item nz-row>
                <div nz-form-label nz-col [nzSm]="4">
                    <label for="rolename" nz-form-item-required>角色名</label>
                </div>
                <div nz-form-control nz-col [nzSm]="20" nzHasFeedback [nzValidateStatus]="getFormControl('name')">
                    <nz-input formControlName="name" [(ngModel)]="role.name" nzPlaceHolder="输入大于等于2并小于等于32的字符" [nzId]="'name'"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('maxlength')">字符长度小于等于32</div>
                    <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('minlength')">字符长度大于等于2</div>
                    <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">请输入角色名</div>
                </div>
            </div>
            <div nz-form-item nz-row>
                <div nz-form-label nz-col [nzSm]="4">
                    <label for="displayName" nz-form-item-required>角色显示</label>
                </div>
                <div nz-form-control nz-col [nzSm]="20" nzHasFeedback [nzValidateStatus]="getFormControl('displayName')">
                    <nz-input formControlName="displayName" [(ngModel)]="role.displayName" nzPlaceHolder="请输入小于等于32的字符" [nzId]="'displayName'"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('displayName').dirty&&getFormControl('displayName').hasError('maxlength')">字符长度小于等于32</div>
                    <div nz-form-explain *ngIf="getFormControl('displayName').dirty&&getFormControl('displayName').hasError('minlength')">字符长度大于等于2</div>
                    <div nz-form-explain *ngIf="getFormControl('displayName').dirty&&getFormControl('displayName').hasError('required')">请输入角色显示名</div>
                </div>
            </div>
            <div nz-form-item nz-row>
                <div nz-form-label nz-col [nzSm]="4">
                    <label for="description" nz-form-item-required>角色描述</label>
                </div>
                <div nz-form-control nz-col [nzSm]="20" nzHasFeedback [nzValidateStatus]="getFormControl('description')">
                    <nz-input formControlName="description" [(ngModel)]="role.description" [nzId]="'description'"></nz-input>
                </div>
            </div>
            <div nz-form-item nz-row>
                权限控制
            </div>
            <div nz-form-item nz-row>
                <!-- <label nz-checkbox formControlName="permissiongroup" *ngFor="let permission of permissions.items" [(ngModel)]="permission.checked">
                    <span>{{permission.displayName}}</span>
                </label> -->
                <nz-checkbox-group formControlName="editpermissiongroup" [(ngModel)]="permissionsConvert" ></nz-checkbox-group>
            </div>
        </ng-template>
        <ng-template #modalFooter>
            <button nz-button [nzType]="'default'" [nzSize]="'large'" type="button" (click)="handleCancel($event)">
                {{l("取消")}}
            </button>
            <button nz-button [nzType]="'primary'" [nzSize]="'large'" type="submit" [nzLoading]="isConfirmLoading">
                {{l("保存")}}
            </button>
        </ng-template>
    </nz-modal>
</form>