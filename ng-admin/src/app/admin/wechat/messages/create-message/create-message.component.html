<form nz-form [formGroup]="formc" *ngIf="modalVisible" id="frm_create_message" (ngSubmit)="save()">
    <nz-modal [nzVisible]="modalVisible" [nzTitle]="'创建关键字回复'" [nzConfirmLoading]="loading" [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="handleCancel($event)">
        <ng-template #modalContent>
            <fieldset>
                <div nz-form-item nz-row [nzGutter]="24">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="keyWord" nz-form-item-required>关键字</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('keyWord')">
                        <nz-input formControlName="keyWord" [(ngModel)]="messages.keyWord" [nzId]="'tenancyName'"></nz-input>
                        <div nz-form-explain *ngIf="getcFormControl('keyWord').dirty&&getcFormControl('keyWord').hasError('maxlength')">字符长度小于等于50</div>
                        <div nz-form-explain *ngIf="getcFormControl('keyWord').dirty&&getcFormControl('keyWord').hasError('required')">关键字不能为空</div>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="matchMode" nz-form-item-required>匹配模式</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('matchMode')">
                        <nz-radio-group formControlName="matchMode" [(ngModel)]="messages.matchMode" class="mb-md">
                            <label nz-radio [nzValue]="o.value" *ngFor="let o of matchModes">
                                <span>{{o.text}}</span>
                            </label>
                        </nz-radio-group>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="msgType" nz-form-item-required>消息类型</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('msgType')">
                        <nz-radio-group formControlName="msgType" [(ngModel)]="messages.msgType" (click)="cleanText()" class="mb-md">
                            <label nz-radio [nzValue]="o.value" *ngFor="let o of msyTypes">
                                <span>{{o.text}}</span>
                            </label>
                        </nz-radio-group>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24" *ngIf="messages.msgType==1">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="content" nz-form-item-required>回复内容</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('content')">
                        <nz-input nzType="textarea" nzRows="4" formControlName="content" [(ngModel)]="messages.content" [nzId]="'content'"></nz-input>
                        <div nz-form-explain *ngIf="getcFormControl('content').dirty&&getcFormControl('content').hasError('required')">内容不能为空</div>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24" *ngIf="messages.msgType==2">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="title" nz-form-item-required>标题</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('title')">
                        <nz-input formControlName="title" [(ngModel)]="messages.title" [nzId]="'title'"></nz-input>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24" *ngIf="messages.msgType==2">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="desc" nz-form-item-required>描述</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('desc')">
                        <nz-input formControlName="desc" [(ngModel)]="messages.desc" [nzId]="'desc'"></nz-input>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24" *ngIf="messages.msgType==2">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="picLink" nz-form-item-required>图片链接</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('picLink')">
                        <nz-input formControlName="picLink" [(ngModel)]="messages.picLink" [nzId]="'picLink'"></nz-input>
                    </div>
                </div>
                <div nz-form-item nz-row [nzGutter]="24" *ngIf="messages.msgType==2">
                    <div nz-form-label nz-col [nzSm]="6">
                        <label for="content" nz-form-item-required>文章链接</label>
                    </div>
                    <div nz-form-control nz-col [nzSm]="18" nzHasFeedback [nzValidateStatus]="getcFormControl('content')">
                        <nz-input formControlName="content" [(ngModel)]="messages.content" [nzId]="'content'"></nz-input>
                        <div nz-form-explain *ngIf="getcFormControl('content').dirty&&getcFormControl('content').hasError('required')">内容不能为空</div>
                    </div>
                </div>
            </fieldset>
        </ng-template>
        <ng-template #modalFooter>
            <button nz-button [nzType]="'default'" [nzSize]="'large'" type="button" (click)="handleCancel($event)">
                {{l("取消")}}
            </button>
            <button nz-button [nzType]="'primary'" [nzSize]="'large'" type="submit" [nzLoading]="isConfirmLoading">
                {{l("保存")}}
            </button>
        </ng-template>
    </nz-modal>
</form>